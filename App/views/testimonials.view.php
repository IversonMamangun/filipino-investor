<div id="testimonials">
<div class="relative">
  <img src="public/assets/gallery.jpg" alt="Gallery background" class="w-full h-auto object-cover">

  <!-- Overlay Title -->
  <div class="absolute inset-0 flex items-start 2xl:items-center  justify-center text-center pt-8">
    <h1 class="text-white text-xl md:text-4xl 2xl:text-6xl font-semibold drop-shadow-lg">
      TESTIMONIALS
    </h1>
  </div>
</div>
<div class="flex relative justify-center  -mt-32 mx-10  md:px-12 lg:px-20 ml-5 ">
  <!-- Carousel Track -->
  <div id="testimonial-carousel" class="flex overflow-hidden md:mt-12 scroll-smooth mx-10 md:mx-15 gap-6 md:gap-10 mb-8 max-w-full md:max-w-[1400px]">

    <!-- Card 1 -->
    <div class="flex bg-white p-4 rounded-xl shadow-lg md:w-full
                w-full sm:w-[350px] md:w-[400px] lg:w-[450px] 
                h-auto md:h-[290px] flex-shrink-0 transition duration-300 hover:scale-105">
      <!-- Left Column -->
      <div class="flex flex-col justify-between items-center w-[30%] mr-2">
        <img class="object-cover w-20 h-20 sm:w-24 sm:h-24 rounded-full"
          src="public/assets/marisol.png" alt="Marisol D.">
        <i>
          <div class="text-[10rem] sm:text-[14rem] font-extrabold text-[#D70328] -mt-[4rem] sm:-mt-[6rem] pr-[2rem] sm:pr-[3rem] rotate-180">"</div>
        </i>
      </div>
      <!-- Right Column -->
      <div class="flex flex-col w-[65%] leading-normal">
        <h5 class="text-lg sm:text-xl font-bold text-[#033E94]">Marisol D.</h5>
        <i class="text-[#033E94] text-sm sm:text-base">Teacher and FISMPC Member</i>
        <p class="mt-3 text-gray-700 text-sm sm:text-base">
          Joining FISMPC was the turning point for my invention.
          The mentorship and funding I received helped me refine my solar irrigation prototype
          and bring it to rural farmers. Now it's making a real impact in our community!
        </p>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="flex bg-white p-4 rounded-xl shadow-lg md:w-full 
                w-full sm:w-[350px] md:w-[400px] lg:w-[450px] 
                h-auto md:h-[290px] flex-shrink-0 transition duration-300 hover:scale-105">
      <div class="flex flex-col justify-between items-center w-[30%] mr-2">
        <img class="object-cover w-20 h-20 sm:w-24 sm:h-24 rounded-full"
          src="public/assets/juan.png" alt="Juan Carlo R.">
        <i>
          <div class="text-[10rem] sm:text-[14rem] font-extrabold text-[#D70328] -mt-[4rem] sm:-mt-[6rem] pr-[2rem] sm:pr-[3rem] rotate-180">"</div>
        </i>
      </div>
      <div class="flex flex-col w-[65%] leading-normal">
        <h5 class="text-lg sm:text-xl font-bold text-[#033E94]">Juan Carlo R.</h5>
        <i class="text-[#033E94] text-sm sm:text-base">Renewable Energy Innovator</i>
        <p class="mt-3 text-gray-700 text-sm sm:text-base">
          Thanks to FISMPC’s training programs, I was able to file a patent for my low-cost water purifier and connect with manufacturing partners. Their support opened doors I never knew existed.
        </p>
      </div>
    </div>

    <!-- Card 3 -->
    <div class="flex bg-white p-4 rounded-xl shadow-lg md:w-full 
                w-full sm:w-[350px] md:w-[400px] lg:w-[450px] 
                h-auto md:h-[290px] flex-shrink-0 transition duration-300 hover:scale-105">
      <div class="flex flex-col justify-between items-center w-[30%] mr-2">
        <img class="object-cover w-20 h-20 sm:w-24 sm:h-24 rounded-full"
          src="public/assets/lani.png" alt="Lani P.">
        <i>
          <div class="text-[10rem] sm:text-[14rem] font-extrabold text-[#D70328] -mt-[4rem] sm:-mt-[6rem] pr-[2rem] sm:pr-[3rem] rotate-180">"</div>
        </i>
      </div>
      <div class="flex flex-col w-[65%] leading-normal">
        <h5 class="text-lg sm:text-xl font-bold text-[#033E94]">Lani P.</h5>
        <i class="text-[#033E94] text-sm sm:text-base">Tech Startup Co-founder</i>
        <p class="mt-3 text-gray-700 text-sm sm:text-base">
          FISMPC is like a family of inventors. We share ideas, resources, and celebrate each other’s successes. At Inventors Demo Day, our team even found an investor who believes in our project.
        </p>
      </div>
    </div>

    <!-- card 4 -->
    <div class="flex bg-white p-4 rounded-xl shadow-lg md:w-full 
                w-full sm:w-[350px] md:w-[400px] lg:w-[450px] 
                h-auto md:h-[290px] flex-shrink-0 transition duration-300 hover:scale-105">
      <div class="flex flex-col justify-between items-center w-[30%] mr-2">
        <img class="object-cover w-20 h-20 sm:w-24 sm:h-24 rounded-full"
          src="public/assets/miguel.png" alt="Lani P.">
        <i>
          <div class="text-[10rem] sm:text-[14rem] font-extrabold text-[#D70328] -mt-[4rem] sm:-mt-[6rem] pr-[2rem] sm:pr-[3rem] rotate-180">"</div>
        </i>
      </div>
      <div class="flex flex-col w-[65%] leading-normal">
        <h5 class="text-lg sm:text-xl font-bold text-[#033E94]">Miguel S.</h5>
        <i class="text-[#033E94] text-sm sm:text-base">Agritech Entrepreneur</i>
        <p class="mt-3 text-gray-700 text-sm sm:text-base">
          Our cooperative has truly empowered me. From workshops on business planning to access to cooperative loans, FISMPC has provided everything I needed to turn my prototype into a social enterprise. </p>
      </div>
    </div>
  </div>

  <!-- Navigation Buttons -->
  <button onclick="scrollTestimonialCarousel(-1)"
    class="absolute left-2 md:left-4 top-1/2 -translate-y-1/2 rounded-full p-2 md:p-3">
    <img src="./public/assets/leftarrow.png" alt="Previous" class="w-20 h-20" />
  </button>

  <button onclick="scrollTestimonialCarousel(1)"
    class="absolute right-2 md:right-4 top-1/2 -translate-y-1/2 rounded-full p-2 md:p-3">
    <img src="./public/assets/rightarrow.png" alt="Next" class="w-20 h-20" />
  </button>
</div>
</div>
<script>
  function scrollTestimonialCarousel(direction) {
    const carousel = document.getElementById('testimonial-carousel');
    const cardWidth = carousel.querySelector('div').offsetWidth + 24; // card width + gap
    carousel.scrollBy({
      left: direction * cardWidth,
      behavior: 'smooth'
    });
  }
</script>

<!-- Carousel Script -->
<script>
  const carousel = document.getElementById('carousel');
  const cards = carousel.querySelectorAll('.bg-white');
  const cardWidth = cards[0].offsetWidth + 24; // card width + gap

  // Duplicate all cards once (so we have a long track)
  carousel.innerHTML += carousel.innerHTML;

  // Get all cards again (originals + clones)
  const allCards = carousel.querySelectorAll('.bg-white');

  // initialize
  setActiveCard(0);

  function scrollCarousel(direction) {
    carousel.scrollBy({
      left: direction * cardWidth,
      behavior: 'smooth'
    });

    setTimeout(() => {
      // If we reach the end of the duplicated track, reset seamlessly
      if (carousel.scrollLeft >= carousel.scrollWidth / 2) {
        carousel.scrollLeft = 0;
      } else if (carousel.scrollLeft <= 0) {
        carousel.scrollLeft = carousel.scrollWidth / 2;
      }

      // Update active card index relative to original set
      const firstVisibleIndex = Math.round(carousel.scrollLeft / cardWidth) % cards.length;
      setActiveCard(firstVisibleIndex);
    }, 400);
  }

  function setActiveCard(index) {
    // Clear all
    allCards.forEach(c => c.classList.remove('active'));
    // Highlight the "real" card in both sets
    allCards.forEach((c, i) => {
      if (i % cards.length === index) {
        c.classList.add('active');
      }
    });
  }
</script>